<h3>{{ editMode ? 'Edit' : 'Add a new ' }} recipe</h3>

<form [formGroup]="recipeForm">
  <button class="btn btn-success mb-2 mr-2" (click)="onSubmit()" [disabled]="recipeForm.invalid">
    {{ editMode ? 'Update' : 'Add' }}
  </button>
  <button class="btn btn-danger mb-2" (click)="onCancel()">Cancel</button>
  <div class="form-group row">
    <label for="name" class="col-sm-2 col-form-label">Name</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" name="name" id="name" formControlName="name">
    </div>
  </div>
  <div class="form-group row">
    <label for="description" class="col-sm-2 col-form-label">Description</label>
    <div class="col-sm-10">
      <textarea type="text" class="form-control" name="description" id="description" rows="3"
        formControlName="description"></textarea>
    </div>
  </div>
  <div class="form-group row">
    <label for="imagePath" class="col-sm-2 col-form-label">Image URL</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" name="imagePath" id="imagePath" formControlName="imagePath">
    </div>
  </div>
  <div class="form-group row">
    <div class="col-sm-2"></div>
    <div class="col-sm-10">
      <img [src]="recipe.imagePath" [alt]="recipe.description" class="rounded float-left img-fluid"
        style="max-width: 100%; max-height: 200px;">
    </div>
  </div>
  <div class="form-group row">
    <label for="ingredients" class="col-sm-2 col-form-label">Ingredients</label>
    <div class="col-sm-10">
      <label class="col-8">Name</label>
      <label class="col-2">Amount</label>
      <div class="col-sm-12" formArrayName="ingredients">
        <!-- Can use either
            [formGroup]="ingredientsControls[i]"
          or
            [formGroupName]="i"
         -->
        <!-- <div class="row" *ngFor="let ingredient of ingredientsControls; index as i" style="margin-bottom: 5px;"
          [formGroup]="ingredientsControls[i]"> -->
        <div class="row" *ngFor="let ingredient of ingredientsControls; index as i" style="margin-bottom: 5px;"
          [formGroupName]="i">
          <input type="text" class="form-control col-8" name="name" formControlName="name">
          <input type="number" class="form-control col-2" name="amount" formControlName="amount">
          <button type="button" class="btn btn-danger col-1.5" (click)="onDeleteIngredient(i)">
            <svg class="bi bi-trash" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
              <path fill-rule="evenodd"
                d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-offset-2">
      <button type="button" class="btn btn-success" (click)="onAddIngredient()">Add Ingredient</button>
    </div>
  </div>
</form>
